<div class="wym_skin_refinery page_part">
  <div class="wym_box field">
    <div id="map-picker">
    </div>

    <aside>
      <%= f.inputs do %>
        <%= f.input :latitude, :input_html => {:id => 'location_latitude'} %>
        <%= f.input :longitude, :input_html => {:id => 'location_longitude'} %>
      <% end %>
    </aside>
  </div>
</div>

<% content_for :stylesheets, stylesheet_link_tag('refinery/location_explorer/map_picker.css') %>
<% content_for :javascripts do %>
  <%= javascript_include_tag('http://maps.google.com/maps/api/js?sensor=true') %>
  <%= javascript_include_tag('refinery/location_explorer/vendor/gmaps.js') %>
  <%= javascript_include_tag('refinery/location_explorer/map_picker') %>

  <script type="text/javascript">
    $(document).ready(function(){
      var map_picker = new Application.MapPicker(
        '#map-picker',
        <%= Refinery::LocationExplorer.config.map_center.to_json.html_safe %>,
        <%= f.object.latlng.to_json.html_safe %>);
    });
  </script>
<% end %>
